name: BIST Radar Bot

on:
  schedule:
    # GitHub UTC zaman dilimini kullanır (Türkiye saati UTC+3'tür).
    # Türkiye 12:00 -> UTC 09:00
    # Türkiye 14:00 -> UTC 11:00
    # Türkiye 16:00 -> UTC 13:00
    # Türkiye 18:00 -> UTC 15:00
    # Hafta içi (1-5) her gün belirtilen saatlerin 10. dakikasında çalışır.
    - cron: '10 9,11,13,15 * * 1-5'
  workflow_dispatch: # Manuel çalıştırma butonunu korur

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install dependencies
        run: |
          pip install yfinance requests pandas numpy

      - name: Run bot
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
        run: python radar.py
